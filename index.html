<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Imagiline</title>

    <link rel="shortcut icon" type="image/png" href="Icons/Imagiline.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="transparent" />
    <meta name="description" content="An app to align your camera to a location you took a previous photo in" />
    <link rel="stylesheet" href="index.css" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <canvas id="video-blur"></canvas>
    <video id="cameraPreview" autoplay playsinline></video>
    <img id="imagePreview" />

    <!-- this is assuming portrait first -->
    <div id="controls">
      <div id="top">
        <div class="left glassy button">
          <svg
            id="overlayInvisible"
            class="removed"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M10.585 10.587a2 2 0 0 0 2.829 2.828" />
            <path
              d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"
            />
            <path d="M3 3l18 18" />
          </svg>

          <svg
            id="overlayVisible"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
            <path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" />
          </svg>
        </div>

        <div class="right glassy button">
          <svg
            id="install-btn"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" />
            <path d="M7 11l5 5l5 -5" />
            <path d="M12 4l0 12" />
          </svg>

          <svg
            id="imageUpload"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M15 8h.01" />
            <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5" />
            <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5" />
            <path d="M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526" />
            <path d="M19 22v-6" />
            <path d="M22 19l-3 -3l-3 3" />
          </svg>
        </div>
      </div>

      <div id="bottom">
        <div class="left glassy button">
          <svg
            id="rotateCamera"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"
            />
            <path d="M11.245 15.904a3 3 0 0 0 3.755 -2.904m-2.25 -2.905a3 3 0 0 0 -3.75 2.905" />
            <path d="M14 13h2v2" />
            <path d="M10 13h-2v-2" />
          </svg>
        </div>

        <div id="shutter"></div>

        <div class="right glassy button">
          <svg
            id="gridLinesToggle"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M3 8h18" />
            <path d="M3 16h18" />
            <path d="M8 3v18" />
            <path d="M16 3v18" />
          </svg>
        </div>
      </div>
    </div>

    <script src="index.js"></script>
    <script src="pwa.js"></script>
    <script type="module">
      import { squircleObserver } from "https://esm.sh/corner-smoothing";

      window.applySquircles = function applySquircles() {
        const allElements = document.querySelectorAll("*");
        allElements.forEach((el) => {
          const style = getComputedStyle(el);
          const radius = parseFloat(style.borderRadius);
          if (radius > 0) {
            squircleObserver(el, {
              cornerRadius: radius,
              cornerSmoothing: 0.6,
              style: {
                fill: style.backgroundColor,
              },
            });
          }
        });
      };

      window.addEventListener("load", window.applySquircles);
    </script>
  </body>
</html>
