<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Imagiline</title>

    <link rel="shortcut icon" type="image/png" href="Icons/Imagiline.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="transparent" />
    <meta name="description" content="An app to align your camera to a location you took a previous photo in" />
    <link rel="stylesheet" href="index.css" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <!-- <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script> -->
  </head>
  <body>
    <nav>
      <label id="popupFileLabel" for="fileInput">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M15 8h.01" />
          <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5" />
          <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5" />
          <path d="M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526" />
          <path d="M19 22v-6" />
          <path d="M22 19l-3 -3l-3 3" />
        </svg>
      </label>
      <input type="file" accept="image/*" id="fileInput" style="display: none" />
      <div id="rotateCameraBtn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path
            d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"
          />
          <path d="M11.245 15.904a3 3 0 0 0 3.755 -2.904m-2.25 -2.905a3 3 0 0 0 -3.75 2.905" />
          <path d="M14 13h2v2" />
          <path d="M10 13h-2v-2" />
        </svg>
      </div>
      <div id="removeImage">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M15 8h.01" />
          <path d="M7 3h11a3 3 0 0 1 3 3v11m-.856 3.099a2.991 2.991 0 0 1 -2.144 .901h-12a3 3 0 0 1 -3 -3v-12c0 -.845 .349 -1.608 .91 -2.153" />
          <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5" />
          <path d="M16.33 12.338c.574 -.054 1.155 .166 1.67 .662l3 3" />
          <path d="M3 3l18 18" />
        </svg>
      </div>
    </nav>

    <div class="media-container">
      <video id="live-feed" autoplay playsinline></video>
    </div>
    <div class="media-container">
      <img id="image-preview" src="" style="display: none" />
    </div>

    <div id="install-btn">Install PWA</div>

    <script src="index.js"></script>
    <script src="pwa.js"></script>
    <script type="module">
      import { squircleObserver } from "https://esm.sh/corner-smoothing";

      window.applySquircles = function applySquircles() {
        const allElements = document.querySelectorAll("*");
        allElements.forEach((el) => {
          const style = getComputedStyle(el);
          const radius = parseFloat(style.borderRadius);
          if (radius > 0) {
            squircleObserver(el, {
              cornerRadius: radius,
              cornerSmoothing: 0.6,
              style: {
                fill: style.backgroundColor,
              },
            });
          }
        });
      };

      window.addEventListener("load", window.applySquircles);
    </script>
    <!-- <script src="https://cbrandolino.github.io/camvas/javascripts/camvas.js"></script> -->
  </body>
</html>
